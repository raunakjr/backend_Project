<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login & Signup</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-900 text-white">
    <!-- Include the Header -->
    <%- include("./headers") %>

    <div class="flex items-center justify-center min-h-screen">
      <div
        class="w-full max-w-4xl bg-gray-800 rounded-lg shadow-lg p-8 flex flex-col gap-6"
      >
        <!-- Flash Messages -->
        <% if (messages && messages.error.length) { %>
        <div
          id="flashError"
          class="bg-red-500 text-white p-3 rounded-md text-center mb-3"
        >
          <%= messages.error %>
        </div>
        <% } %> <% if (messages && messages.success.length) { %>
        <div
          id="flashSuccess"
          class="bg-green-500 text-white p-3 rounded-md text-center mb-3"
        >
          <%= messages.success %>
        </div>
        <% } %>

        <div class="flex flex-col md:flex-row gap-6">
          <!-- Signup Form -->
          <div class="w-full md:w-1/2 p-6 bg-gray-700 rounded-lg">
            <h2 class="text-2xl font-bold text-center text-blue-400 mb-4">
              Create an Account
            </h2>
            <form
              action="/users/register"
              method="POST"
              enctype="multipart/form-data"
              class="space-y-4"
            >
              <input
                type="text"
                name="fullname"
                placeholder="Full Name"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
              />

              <input
                type="email"
                name="email"
                placeholder="Email"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
              />

              <input
                type="password"
                name="password"
                placeholder="Password"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
              />

              <!-- New Contact Field -->
              <input
                type="text"
                name="contact"
                placeholder="Contact Number"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
              />

              <!-- Profile Picture Upload -->
              <input
                type="file"
                name="picture"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
              />

              <button
                type="submit"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-md transition"
              >
                Sign Up
              </button>
            </form>
          </div>

          <!-- Login Form -->
          <div class="w-full md:w-1/2 p-6 bg-gray-700 rounded-lg">
            <h2 class="text-2xl font-bold text-center text-green-400 mb-4">
              Login to Your Account
            </h2>
            <form action="/users/login" method="POST" class="space-y-4">
              <input
                type="email"
                name="email"
                placeholder="Email"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none"
                required
              />

              <input
                type="password"
                name="password"
                placeholder="Password"
                class="w-full p-3 bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none"
                required
              />

              <button
                type="submit"
                class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-md transition"
              >
                Login
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript to Remove Flash Messages After 3 Seconds -->
    <script>
      setTimeout(() => {
        const flashError = document.getElementById("flashError");
        if (flashError) flashError.style.display = "none";

        const flashSuccess = document.getElementById("flashSuccess");
        if (flashSuccess) flashSuccess.style.display = "none";
      }, 3000);
    </script>
  </body>
</html>
